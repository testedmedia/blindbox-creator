<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=1200, height=1600">
  <title>Pages Flat Lay</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Quicksand:wght@400;600;700&display=swap');

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      width: 1200px;
      height: 1600px;
      overflow: hidden;
      font-family: 'Quicksand', 'Segoe UI', system-ui, sans-serif;
      background: #f8f9fa;
    }

    .flatlay-container {
      width: 1200px;
      height: 1600px;
      position: relative;
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    /* ── Background texture ── */
    .bg-texture {
      position: absolute;
      inset: 0;
      background:
        radial-gradient(circle at 20% 20%, rgba(255, 182, 193, 0.08) 0%, transparent 50%),
        radial-gradient(circle at 80% 80%, rgba(147, 197, 253, 0.08) 0%, transparent 50%),
        #f8f9fa;
      z-index: 0;
    }

    /* ── Title overlay ── */
    .flatlay-header {
      position: relative;
      z-index: 10;
      text-align: center;
      padding-top: 50px;
      padding-bottom: 20px;
    }

    .flatlay-title {
      font-size: 48px;
      font-weight: 700;
      color: #2D2D2D;
      text-shadow: 0 2px 8px rgba(0,0,0,0.05);
    }

    .flatlay-title .page-count {
      color: #FF6B9D;
    }

    .flatlay-subtitle {
      font-size: 22px;
      font-weight: 600;
      color: #9CA3AF;
      margin-top: 4px;
    }

    /* ── Thumbnail grid area ── */
    .thumbnails-area {
      position: relative;
      z-index: 5;
      flex: 1;
      width: 100%;
      padding: 20px 40px;
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      align-content: center;
      gap: 16px;
    }

    /* ── Individual page thumbnail ── */
    .page-thumb {
      position: relative;
      width: 200px;
      height: 260px;
      flex-shrink: 0;
    }

    /* Organic rotation for natural flat lay feel */
    .page-thumb:nth-child(4n+1) { transform: rotate(-2deg); }
    .page-thumb:nth-child(4n+2) { transform: rotate(1.5deg); }
    .page-thumb:nth-child(4n+3) { transform: rotate(-1deg); }
    .page-thumb:nth-child(4n)   { transform: rotate(2.5deg); }
    .page-thumb:nth-child(5n+1) { transform: rotate(0.5deg) translateY(-4px); }
    .page-thumb:nth-child(5n+3) { transform: rotate(-1.8deg) translateY(6px); }
    .page-thumb:nth-child(7n+2) { transform: rotate(1deg) translateX(3px); }

    .page-thumb-inner {
      width: 100%;
      height: 100%;
      background: #ffffff;
      border: 6px solid #ffffff;
      border-radius: 4px;
      box-shadow:
        0 2px 8px rgba(0, 0, 0, 0.08),
        0 4px 16px rgba(0, 0, 0, 0.04);
      overflow: hidden;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .page-thumb-img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      image-rendering: auto;
    }

    /* Placeholder for thumbnails without images */
    .page-thumb-placeholder {
      width: 100%;
      height: 100%;
      background: linear-gradient(135deg, #f0f0f0, #e8e8e8);
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      gap: 8px;
    }

    .page-thumb-placeholder .icon {
      font-size: 32px;
      opacity: 0.4;
    }

    .page-thumb-placeholder .label {
      font-size: 11px;
      font-weight: 600;
      color: #9CA3AF;
      text-align: center;
      padding: 0 8px;
      line-height: 1.3;
    }

    /* Page name label below thumbnail */
    .page-label {
      position: absolute;
      bottom: -4px;
      left: 50%;
      transform: translateX(-50%);
      background: rgba(255, 255, 255, 0.95);
      padding: 2px 10px;
      border-radius: 8px;
      font-size: 10px;
      font-weight: 600;
      color: #6B7280;
      white-space: nowrap;
      box-shadow: 0 1px 3px rgba(0,0,0,0.08);
    }

    /* ── Footer ── */
    .flatlay-footer {
      position: relative;
      z-index: 10;
      text-align: center;
      padding-bottom: 40px;
      padding-top: 20px;
    }

    .pack-name-footer {
      font-size: 28px;
      font-weight: 700;
      color: #D1D5DB;
      letter-spacing: 2px;
    }

    .footer-tagline {
      font-size: 16px;
      font-weight: 600;
      color: #E5E7EB;
      margin-top: 4px;
      letter-spacing: 0.5px;
    }

    /* ── Decorative elements ── */
    .deco-star {
      position: absolute;
      z-index: 2;
      opacity: 0.1;
      font-size: 40px;
    }
    .deco-star.s1 { top: 120px; left: 30px; font-size: 28px; transform: rotate(15deg); }
    .deco-star.s2 { top: 200px; right: 50px; font-size: 36px; transform: rotate(-10deg); }
    .deco-star.s3 { bottom: 150px; left: 60px; font-size: 32px; transform: rotate(25deg); }
    .deco-star.s4 { bottom: 100px; right: 40px; font-size: 24px; transform: rotate(-20deg); }
  </style>
</head>
<body>
  <div class="flatlay-container" id="flatlay">
    <div class="bg-texture"></div>
    <!-- Content injected by render() -->
  </div>

  <script>
    /**
     * Render the pages flat lay with injected data.
     *
     * @param {Object} data
     * @param {string} data.packName - Display name of the pack
     * @param {string} data.packId - Pack ID
     * @param {Object} data.theme - Theme colors
     * @param {Array} data.pageThumbnails - Array of { name, dataUrl } objects
     */
    function render(data) {
      const container = document.getElementById('flatlay');
      if (!container) return;

      const thumbs = data.pageThumbnails || [];
      const theme = data.theme || {};
      const pageCount = thumbs.length;

      let html = `<div class="bg-texture"></div>`;

      // Decorative stars
      html += `
        <span class="deco-star s1">&#10022;</span>
        <span class="deco-star s2">&#10023;</span>
        <span class="deco-star s3">&#10022;</span>
        <span class="deco-star s4">&#10023;</span>
      `;

      // Header
      html += `
        <div class="flatlay-header">
          <div class="flatlay-title"><span class="page-count">${pageCount}</span> Pages of Printable Fun!</div>
          <div class="flatlay-subtitle">Print, Cut, Fold &amp; Play</div>
        </div>
      `;

      // Thumbnails
      html += `<div class="thumbnails-area">`;

      for (const thumb of thumbs) {
        const hasImage = thumb.dataUrl && thumb.dataUrl.startsWith('data:');
        html += `
          <div class="page-thumb">
            <div class="page-thumb-inner">
              ${hasImage
                ? `<img class="page-thumb-img" src="${thumb.dataUrl}" alt="${escapeHtml(thumb.name)}" />`
                : `<div class="page-thumb-placeholder">
                     <span class="icon">&#128196;</span>
                     <span class="label">${escapeHtml(thumb.name)}</span>
                   </div>`
              }
            </div>
            <div class="page-label">${escapeHtml(thumb.name)}</div>
          </div>
        `;
      }

      html += `</div>`;

      // Footer
      html += `
        <div class="flatlay-footer">
          <div class="pack-name-footer">${escapeHtml(data.packName || '')}</div>
          <div class="footer-tagline">Instant Download &bull; Print at Home</div>
        </div>
      `;

      container.innerHTML = html;

      // Signal render complete
      document.body.classList.add('rendered');
    }

    /** Simple HTML escaping */
    function escapeHtml(str) {
      const div = document.createElement('div');
      div.textContent = str || '';
      return div.innerHTML;
    }

    // Auto-render if data is already injected
    if (window.__PACK_DATA) {
      render(window.__PACK_DATA);
    }
  </script>
</body>
</html>
